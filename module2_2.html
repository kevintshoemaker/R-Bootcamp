<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />


<meta name="author" content="Basic programming in R" />


<title>Module 2.2</title>

<script src="site_libs/header-attrs-2.24/header-attrs.js"></script>
<script src="site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/journal.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<style>h1 {font-size: 34px;}
       h1.title {font-size: 38px;}
       h2 {font-size: 30px;}
       h3 {font-size: 24px;}
       h4 {font-size: 18px;}
       h5 {font-size: 16px;}
       h6 {font-size: 12px;}
       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}
       pre:not([class]) { background-color: white }</style>
<script src="site_libs/jqueryui-1.13.2/jquery-ui.min.js"></script>
<link href="site_libs/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="site_libs/tocify-1.9.1/jquery.tocify.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<link href="site_libs/highlightjs-9.12.0/default.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>

<style type="text/css">code{white-space: pre;}</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>









<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
details > summary > p:only-child {
  display: inline;
}
pre code {
  padding: 0;
}
</style>


<style type="text/css">
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #adb5bd;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script type="text/javascript">
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark the anchor link active (and if it's in a dropdown, also mark that active)
  var dropdown = menuAnchor.closest('li.dropdown');
  if (window.bootstrap) { // Bootstrap 4+
    menuAnchor.addClass('active');
    dropdown.find('> .dropdown-toggle').addClass('active');
  } else { // Bootstrap 3
    menuAnchor.parent().addClass('active');
    dropdown.addClass('active');
  }

  // Navbar adjustments
  var navHeight = $(".navbar").first().height() + 15;
  var style = document.createElement('style');
  var pt = "padding-top: " + navHeight + "px; ";
  var mt = "margin-top: -" + navHeight + "px; ";
  var css = "";
  // offset scroll position for anchor links (for fixed navbar)
  for (var i = 1; i <= 6; i++) {
    css += ".section h" + i + "{ " + pt + mt + "}\n";
  }
  style.innerHTML = "body {" + pt + "padding-bottom: 40px; }\n" + css;
  document.head.appendChild(style);
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before, .tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "\e259";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "\e258";
  font-family: 'Glyphicons Halflings';
  border: none;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->



<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}

@media print {
.toc-content {
  /* see https://github.com/w3c/csswg-drafts/issues/4434 */
  float: right;
}
}

.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
}

.tocify .list-group-item {
  border-radius: 0px;
}


</style>



</head>

<body>


<div class="container-fluid main-container">


<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-bs-toggle="collapse" data-target="#navbar" data-bs-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">UNR R workshop, Spring 2024</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="index.html">Home</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Workshop #1: getting started
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="module1_1.html">Module 1.1: working with objects</a>
    </li>
    <li>
      <a href="module1_2.html">Module 1.2: managing data</a>
    </li>
    <li>
      <a href="module1_3.html">Module 1.3: plotting in ggplot2</a>
    </li>
    <li>
      <a href="module1_4.html">Module 1.4: data wrangling</a>
    </li>
    <li>
      <a href="EXTRAS.html">Module 1.5: final demo</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Workshop #2: beyond the basics
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="module2_1.html">Module 2.1: R packages</a>
    </li>
    <li>
      <a href="module2_2.html">Module 2.2: Programming in R</a>
    </li>
    <li>
      <a href="module2_3.html">Module 2.3: Stats in R</a>
    </li>
    <li>
      <a href="module2_4.html">Module 2.4: Spatial analysis in R</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Data sets
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="data.dat">Example: tab-separated data</a>
    </li>
    <li>
      <a href="data.csv">Example: comma-separated data</a>
    </li>
    <li>
      <a href="data.txt">Example: whitespace-separated data</a>
    </li>
    <li>
      <a href="data_missing.txt">Example: missing data</a>
    </li>
    <li>
      <a href="MTMetStations.csv">Meteorological Data</a>
    </li>
    <li>
      <a href="sculpineggs.csv">Sculpin Data</a>
    </li>
    <li>
      <a href="turtle_data.txt">Turtle Data</a>
    </li>
    <li>
      <a href="geneData.csv">Gene Data</a>
    </li>
    <li>
      <a href="reptiles.csv">Reptile Data</a>
    </li>
    <li>
      <a href="comm_data.txt">Comm Data</a>
    </li>
    <li>
      <a href="data.zip">GIS Data</a>
    </li>
  </ul>
</li>
<li>
  <a href="Links.html">Links</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div id="header">



<h1 class="title toc-ignore">Module 2.2</h1>
<h4 class="author">Basic programming in R</h4>
<h4 class="date">Spring 2024</h4>

</div>


<div id="load-script-for-module-2.2" class="section level2">
<h2>Load script for module #2.2</h2>
<ol style="list-style-type: decimal">
<li><p>Click <a href="module2_2.R">here</a> to download the script! Save
the script to your working directory (R Project directory).</p></li>
<li><p>Load your script in your RStudio Project. To do this, open your
RStudio Project and click on the folder icon in the toolbar at the top
and load your script.</p></li>
</ol>
<p>Let’s get started with basic programming in R!</p>
<p><em>One quick note</em>: this submodule primarily uses base R instead
of the tidyverse. You’ll notice that we use the <code>plot()</code>
function, which is R’s built in plotting functionality. This is less
sophisticated than ggplot in many ways, and is much harder to use for
quick data visualizations, but it’s still useful to know how to use
it…</p>
</div>
<div id="functions-in-r" class="section level2">
<h2>Functions in R</h2>
<p>Everything in R can be boiled down to this: data are expressed as
<em>vectors</em>, and data objects are managed, manipulated, and
visualized via <strong>functions</strong>. Functions are absolutely
central!</p>
<p>Let’s start with a blank workspace:</p>
<pre class="r"><code># Start with blank workspace -------------------

rm(list=ls())</code></pre>
<p>Base R already includes lots of functions, and thousands more
functions are available in packages that you can install. Nonetheless,
it’s really useful to know how to write your own functions! For example,
we might write our own function if we have to repeat certain sets of
operations over and over in different contexts.</p>
<p>We use the following syntax when we are writing our own
functions:</p>
<pre><code>
my.function &lt;- function(input1,input2,...){         # function takes various arguments (inputs)
    
    ## [Algorithm goes here: Do something useful with the inputs]
    
    return(output)  # return some output
}
</code></pre>
<div id="mean-function" class="section level3">
<h3>‘Mean’ function</h3>
<p>Let’s write a function to compute the mean of a numeric vector. Okay
fine, base R already has the “mean()” function, but let’s do it
anyway!</p>
<pre class="r"><code>## We can write our own functions. Useful if we have to repeat the same operations over and over with different inputs.
my.mean &lt;- function(x){       # &#39;x&#39; is the function argument- &#39;x&#39; stands in for whatever numeric vector the user wants
    m &lt;- sum(x)/length(x)
    return(m)
}

foo &lt;- c(2, 4, 6, 8)
my.mean(foo)</code></pre>
<pre><code>## [1] 5</code></pre>
<p>Here, the variable “x” stands in for any possible numeric vector. The
function takes the user input, names it “x” (within the function
environment), computes a new scalar variable “m” that represents the
mean of the vector “x”, and returns the variable “m”.</p>
</div>
<div id="square-function" class="section level3">
<h3>‘Square’ function</h3>
<p>How about a function to square its arguments?</p>
<pre class="r"><code>## A function to square the arguments.
square &lt;- function(x){
    x^2
}

## Square a single value (scalar).
square(2)</code></pre>
<pre><code>## [1] 4</code></pre>
<pre class="r"><code>## Square all elements of a vector.
square(1:10)</code></pre>
<pre><code>##  [1]   1   4   9  16  25  36  49  64  81 100</code></pre>
<p>If there is no explicit <code>return</code> function, the function
will return the output of the last command (line of code) within the
function.</p>
</div>
<div id="logit-function" class="section level3">
<h3>‘Logit’ function</h3>
<p>The logit operation (log-odds) is often used for working with
probabilities. Let’s write it ourselves!</p>
<pre class="r"><code>## Often, we need to write functions that are not included in the base R package e.g., the logit function.
## Calculate the log-odds (logit).
logit &lt;- function(x){
    log(x/(1-x))
}

## Calculate logit of 0.9.
logit(.9)</code></pre>
<pre><code>## [1] 2.197225</code></pre>
<pre class="r"><code>## Sequence between 0 and 1.
x &lt;- seq(from = 0, to = 1, by = 0.01)

## Caclulate the logit of a vector.
logit.x &lt;- logit(x)
logit.x</code></pre>
<pre><code>##   [1]        -Inf -4.59511985 -3.89182030 -3.47609869 -3.17805383 -2.94443898
##   [7] -2.75153531 -2.58668934 -2.44234704 -2.31363493 -2.19722458 -2.09074110
##  [13] -1.99243016 -1.90095876 -1.81528997 -1.73460106 -1.65822808 -1.58562726
##  [19] -1.51634749 -1.45001018 -1.38629436 -1.32492541 -1.26566637 -1.20831121
##  [25] -1.15267951 -1.09861229 -1.04596856 -0.99462258 -0.94446161 -0.89538405
##  [31] -0.84729786 -0.80011930 -0.75377180 -0.70818506 -0.66329422 -0.61903921
##  [37] -0.57536414 -0.53221681 -0.48954823 -0.44731222 -0.40546511 -0.36396538
##  [43] -0.32277339 -0.28185115 -0.24116206 -0.20067070 -0.16034265 -0.12014431
##  [49] -0.08004271 -0.04000533  0.00000000  0.04000533  0.08004271  0.12014431
##  [55]  0.16034265  0.20067070  0.24116206  0.28185115  0.32277339  0.36396538
##  [61]  0.40546511  0.44731222  0.48954823  0.53221681  0.57536414  0.61903921
##  [67]  0.66329422  0.70818506  0.75377180  0.80011930  0.84729786  0.89538405
##  [73]  0.94446161  0.99462258  1.04596856  1.09861229  1.15267951  1.20831121
##  [79]  1.26566637  1.32492541  1.38629436  1.45001018  1.51634749  1.58562726
##  [85]  1.65822808  1.73460106  1.81528997  1.90095876  1.99243016  2.09074110
##  [91]  2.19722458  2.31363493  2.44234704  2.58668934  2.75153531  2.94443898
##  [97]  3.17805383  3.47609869  3.89182030  4.59511985         Inf</code></pre>
<pre class="r"><code>## Plot x on x-axis, and logit(x) on y axis.
plot(x, logit.x, type = &#39;l&#39;,xlab=&quot;x&quot;,ylab=&quot;logit(x)&quot;)    # View the output graphically.</code></pre>
<p><img src="module2_2_files/figure-html/unnamed-chunk-5-1.png" width="672" /></p>
</div>
</div>
<div id="conditional-statements" class="section level2">
<h2>Conditional statements</h2>
<p>Conditional, or logical, operations (IF [condition] THEN [do
something] ELSE [do something]) are a basic building block of computer
programming.</p>
<div id="ifelse-statements-in-r" class="section level3">
<h3>if…else statements in R</h3>
<p>The basic syntax for if…else statements in R is as follows:</p>
<pre><code>
if([some condition]){               ## if some condition is met
  [execute some commands]
}else if ([some other condition]){   ## if some other condition is met (often this clause is not necessary)
  [execute some other commands]
}else{                               ## if none of the above conditions are met (otherwise...)
  [execute some other commands]
}
</code></pre>
<p>NOTE: you can include any number of nested “else if(…)” statements-
or you can omit these entirely!</p>
<p>Let’s try it!</p>
<pre class="r"><code>#  if...else statements -----------------------

# Draw a sample from a Binomial distribution with p = 0.7 (here, p represents detection probability).
p &lt;- 0.7            # probability of detection
x &lt;- rbinom(n = 1, size = 1, prob = p)      # single &#39;coin flip&#39; with prob success equal to p

if (x &gt; 0) {
    print(&quot;detected&quot;)
} else {
    print(&quot;not detected&quot;)
}</code></pre>
<pre><code>## [1] &quot;detected&quot;</code></pre>
</div>
<div id="ifelse-function" class="section level3">
<h3>ifelse() function</h3>
<p>Note that “if…else” only works for testing one condition at a time.
If we have a vector with lots of data, we need something else –
something “vectorized” – like the “ifelse()” function:</p>
<pre class="r"><code>#  ifelse()  --------------------------------

## Note if...else only works for running one logical (T/F) test at a time. If we have a spreadsheet with lots of data, we need something else.
n.samples &lt;- 100

## 100 samples from a binomial distribution with detection probability p = 0.7.
y &lt;- rbinom(n = n.samples, size = 1, prob = p)
y</code></pre>
<pre><code>##   [1] 0 1 1 1 0 1 1 1 1 1 0 1 1 0 0 1 1 0 0 1 1 1 1 1 1 1 1 1 1 1 1 0 1 1 0 1 1
##  [38] 0 1 1 1 1 0 1 1 1 0 0 1 0 1 0 0 1 0 1 0 1 1 1 1 0 1 0 1 1 1 1 1 1 1 1 1 1
##  [75] 1 0 1 1 0 0 1 1 1 0 0 1 1 1 1 1 1 0 0 1 1 1 1 0 0 1</code></pre>
<pre class="r"><code>## Use ifelse d
detection.history &lt;- ifelse(y == 1, &quot;Detected&quot;, &quot;Not detected&quot;)
detection.history</code></pre>
<pre><code>##   [1] &quot;Not detected&quot; &quot;Detected&quot;     &quot;Detected&quot;     &quot;Detected&quot;     &quot;Not detected&quot;
##   [6] &quot;Detected&quot;     &quot;Detected&quot;     &quot;Detected&quot;     &quot;Detected&quot;     &quot;Detected&quot;    
##  [11] &quot;Not detected&quot; &quot;Detected&quot;     &quot;Detected&quot;     &quot;Not detected&quot; &quot;Not detected&quot;
##  [16] &quot;Detected&quot;     &quot;Detected&quot;     &quot;Not detected&quot; &quot;Not detected&quot; &quot;Detected&quot;    
##  [21] &quot;Detected&quot;     &quot;Detected&quot;     &quot;Detected&quot;     &quot;Detected&quot;     &quot;Detected&quot;    
##  [26] &quot;Detected&quot;     &quot;Detected&quot;     &quot;Detected&quot;     &quot;Detected&quot;     &quot;Detected&quot;    
##  [31] &quot;Detected&quot;     &quot;Not detected&quot; &quot;Detected&quot;     &quot;Detected&quot;     &quot;Not detected&quot;
##  [36] &quot;Detected&quot;     &quot;Detected&quot;     &quot;Not detected&quot; &quot;Detected&quot;     &quot;Detected&quot;    
##  [41] &quot;Detected&quot;     &quot;Detected&quot;     &quot;Not detected&quot; &quot;Detected&quot;     &quot;Detected&quot;    
##  [46] &quot;Detected&quot;     &quot;Not detected&quot; &quot;Not detected&quot; &quot;Detected&quot;     &quot;Not detected&quot;
##  [51] &quot;Detected&quot;     &quot;Not detected&quot; &quot;Not detected&quot; &quot;Detected&quot;     &quot;Not detected&quot;
##  [56] &quot;Detected&quot;     &quot;Not detected&quot; &quot;Detected&quot;     &quot;Detected&quot;     &quot;Detected&quot;    
##  [61] &quot;Detected&quot;     &quot;Not detected&quot; &quot;Detected&quot;     &quot;Not detected&quot; &quot;Detected&quot;    
##  [66] &quot;Detected&quot;     &quot;Detected&quot;     &quot;Detected&quot;     &quot;Detected&quot;     &quot;Detected&quot;    
##  [71] &quot;Detected&quot;     &quot;Detected&quot;     &quot;Detected&quot;     &quot;Detected&quot;     &quot;Detected&quot;    
##  [76] &quot;Not detected&quot; &quot;Detected&quot;     &quot;Detected&quot;     &quot;Not detected&quot; &quot;Not detected&quot;
##  [81] &quot;Detected&quot;     &quot;Detected&quot;     &quot;Detected&quot;     &quot;Not detected&quot; &quot;Not detected&quot;
##  [86] &quot;Detected&quot;     &quot;Detected&quot;     &quot;Detected&quot;     &quot;Detected&quot;     &quot;Detected&quot;    
##  [91] &quot;Detected&quot;     &quot;Not detected&quot; &quot;Not detected&quot; &quot;Detected&quot;     &quot;Detected&quot;    
##  [96] &quot;Detected&quot;     &quot;Detected&quot;     &quot;Not detected&quot; &quot;Not detected&quot; &quot;Detected&quot;</code></pre>
<pre class="r"><code>## Going the other direction.
ifelse(detection.history == &quot;Detected&quot;, 1, 0)</code></pre>
<pre><code>##   [1] 0 1 1 1 0 1 1 1 1 1 0 1 1 0 0 1 1 0 0 1 1 1 1 1 1 1 1 1 1 1 1 0 1 1 0 1 1
##  [38] 0 1 1 1 1 0 1 1 1 0 0 1 0 1 0 0 1 0 1 0 1 1 1 1 0 1 0 1 1 1 1 1 1 1 1 1 1
##  [75] 1 0 1 1 0 0 1 1 1 0 0 1 1 1 1 1 1 0 0 1 1 1 1 0 0 1</code></pre>
<pre class="r"><code>xt  &lt;-  cbind(rbinom(10, 1, .5), rbinom(10, 1, .6))
xt</code></pre>
<pre><code>##       [,1] [,2]
##  [1,]    1    0
##  [2,]    0    1
##  [3,]    1    1
##  [4,]    1    1
##  [5,]    0    1
##  [6,]    1    1
##  [7,]    0    1
##  [8,]    1    1
##  [9,]    0    0
## [10,]    0    0</code></pre>
<pre class="r"><code>ifelse(xt[, 1] &gt; 0 &amp; xt[, 2] &gt; 0, &quot;Detected twice&quot;,
       &quot;Not detected twice&quot;)</code></pre>
<pre><code>##  [1] &quot;Not detected twice&quot; &quot;Not detected twice&quot; &quot;Detected twice&quot;    
##  [4] &quot;Detected twice&quot;     &quot;Not detected twice&quot; &quot;Detected twice&quot;    
##  [7] &quot;Not detected twice&quot; &quot;Detected twice&quot;     &quot;Not detected twice&quot;
## [10] &quot;Not detected twice&quot;</code></pre>
</div>
</div>
<div id="iteration" class="section level2">
<h2>Iteration</h2>
<p>Iterating, or running the same operation over and over sequentially,
is another fundamental computer programming tool. Computers are great at
performing multiple computations really, really fast!
<strong>Loops</strong> are a good way to take advantage of
computers!</p>
<p>The basic syntax for iterating in R is called a “FOR loop”, and looks
like this:</p>
<pre><code>
for([iteration variable] in [iteration vector of length x]){
  [perform specified operation(s) x times, with the iteration variable set at each value of the iteration vector in succession]
}
</code></pre>
<p>For example…</p>
<pre class="r"><code>#  for loops  --------------------------

for(i in 1:10){
  print(i)
}</code></pre>
<pre><code>## [1] 1
## [1] 2
## [1] 3
## [1] 4
## [1] 5
## [1] 6
## [1] 7
## [1] 8
## [1] 9
## [1] 10</code></pre>
<pre class="r"><code>for(j in c(2,4,6,8,10)){    
  print(j)
}</code></pre>
<pre><code>## [1] 2
## [1] 4
## [1] 6
## [1] 8
## [1] 10</code></pre>
<pre class="r"><code>n.iter &lt;- 10                   # another alternative!
count &lt;- 0
for(i in 1:n.iter){
  count &lt;- count+1            # assign a new value of count equal to the old value of count plus 1
  print(count)
}</code></pre>
<pre><code>## [1] 1
## [1] 2
## [1] 3
## [1] 4
## [1] 5
## [1] 6
## [1] 7
## [1] 8
## [1] 9
## [1] 10</code></pre>
<p>Take the first FOR loop above. Here, “i” is the <em>iteration
variable</em> and “1:n.iter” is the <em>iteration vector</em>:</p>
<pre class="r"><code>  # closer look at iteration vector:
1:n.iter</code></pre>
<pre><code>##  [1]  1  2  3  4  5  6  7  8  9 10</code></pre>
<p>Essentially, R starts this FOR loop by setting the value of the
placeholder <em>iteration variable</em> “i” to the first value of the
<em>iteration vector</em> (i.e., the value 1). It then runs the two
commands in the body of the for loop [count &lt;- count+1;
print(count)]. Then, it sets the iteration variable “i” to the next
value in the <em>iteration vector</em> (i.e., the value 2) and runs the
commands again. It keeps doing this until it reaches the end of the
iteration vector, at which point it stops!</p>
<p>It is often useful to reference the iteration variable directly
within the FOR loop. Here are some examples:</p>
<pre class="r"><code>## A for-loop for dependent sequence (here, the Fibonacci sequence)
n.iter &lt;- 10
x &lt;- rep(0, n.iter)           # set up vector of all zeros
x[1] &lt;- 1                     # assign x_1  &lt;-  1
x[2] &lt;- 1                     # assign x_2 = 0
for(i in 3:n.iter){
  x[i] &lt;- x[i-1]+x[i-2]       # x_i = x_(i-1) + x_(i-2)
}
x</code></pre>
<pre><code>##  [1]  1  1  2  3  5  8 13 21 34 55</code></pre>
<div id="iterating-using-the-apply-family-of-functions-in-r"
class="section level3">
<h3>Iterating using the “apply() family of functions in R”</h3>
<pre class="r"><code>### apply (another way to iterate) ------------------

W &lt;- matrix(rnorm(4, 10, 3), nrow = 2, ncol = 2)  # Create a 2X2 matrix using a Normal random number generator with mu=10 and sd=3
W</code></pre>
<pre><code>##          [,1]     [,2]
## [1,] 6.056728 5.469694
## [2,] 7.612264 7.514397</code></pre>
<pre class="r"><code>## For each row, calculate the mean.
apply(W, 1, mean)</code></pre>
<pre><code>## [1] 5.763211 7.563330</code></pre>
<pre class="r"><code>## For each column, calculate the mean.
apply(W, 2, mean)</code></pre>
<pre><code>## [1] 6.834496 6.492046</code></pre>
<pre class="r"><code>## Apply your own custom function to each row in a matrix.
MyFunc &lt;- function(x){
    2+sum(x/5)-3/2*mean(x)^2
}
apply(W, 1, MyFunc)</code></pre>
<pre><code>## [1] -45.51662 -80.78062</code></pre>
<pre class="r"><code># lapply: apply a function across a list or vector --------------

# apply the &quot;exp()&quot; function to each element in the vector 1:5 

lapply(1:5,function(x) exp(x)) </code></pre>
<pre><code>## [[1]]
## [1] 2.718282
## 
## [[2]]
## [1] 7.389056
## 
## [[3]]
## [1] 20.08554
## 
## [[4]]
## [1] 54.59815
## 
## [[5]]
## [1] 148.4132</code></pre>
<pre class="r"><code># compute the square root of volume for the first five trees in the &#39;trees&#39; dataset

lapply(1:5, function(t) sqrt(trees$Volume[t]))</code></pre>
<pre><code>## [[1]]
## [1] 3.209361
## 
## [[2]]
## [1] 3.209361
## 
## [[3]]
## [1] 3.193744
## 
## [[4]]
## [1] 4.049691
## 
## [[5]]
## [1] 4.335897</code></pre>
<pre class="r"><code># sapply: same thing as &#39;lapply&#39; but simplifies the returned object (i.e., into a vector if the function returns a scalar...)

mylist &lt;- list()
mylist[[1]] &lt;- seq(1,5,length=10)
mylist[[2]] &lt;- c(1,.5,-.4)
mylist[[3]] &lt;- matrix(rnorm(12,10,3),nrow=3)
sapply(mylist,function(x) sum(x)) </code></pre>
<pre><code>## [1]  30.0000   1.1000 113.3849</code></pre>
</div>
</div>
<div id="challenge-problems" class="section level2">
<h2>Challenge problems!</h2>
<ol style="list-style-type: decimal">
<li>Create a custom function to calculate the predicted value <span
class="math inline">\(y\)</span> for the equation <span
class="math inline">\(y = \beta_0 + \beta_1*x\)</span> for any value of
<span class="math inline">\(\beta_0\)</span>, <span
class="math inline">\(\beta_1\)</span> and <span
class="math inline">\(x\)</span>. Assume that <span
class="math inline">\(\beta_0\)</span> and <span
class="math inline">\(\beta_1\)</span> are both scalar, whereas x is a
numeric vector. Use this function to calculate <span
class="math inline">\(y\)</span> for the values of <span
class="math inline">\(x\)</span> = 1,…,10 with <span
class="math inline">\(\beta_0 = 2\)</span>, and <span
class="math inline">\(\beta_1= -1\)</span>. Use base R plotting
(<code>plot()</code> function) to plot the results.</li>
</ol>
<p>Your result should look something like this:</p>
<p><img src="module2_2_files/figure-html/unnamed-chunk-12-1.png" width="672" /></p>
<ol start="2" style="list-style-type: decimal">
<li>Write a FOR loop that takes a numeric vector as input and computes
the cumulative mean (for each element of the vector, compute the mean of
all previous elements of the vector, including the current
element).</li>
</ol>
<p>If you apply this loop to the following vector “x”:</p>
<pre class="r"><code>x=c(5,4,7,3,10,2,5,4,7,6)</code></pre>
<p>You should get the following result:</p>
<pre><code>##  [1] 5.000000 4.500000 5.333333 4.750000 5.800000 5.166667 5.142857 5.000000
##  [9] 5.222222 5.300000</code></pre>
<ol start="3" style="list-style-type: decimal">
<li>Using the built-in ‘volcano’ dataset (a matrix of elevation data
with columns representing longitude and rows representing latitude),
calculate the standard deviation of elevation as an index of
‘ruggedness’ from the rows () of the volcano elevation data matrix.
Using the “apply()” function. Which row (latitude band) of the ‘volcano’
dataset has the most rugged terrain?</li>
</ol>
<p>Here’s a quick look at the volcano dataset:</p>
<pre class="r"><code>filled.contour(volcano, color.palette = terrain.colors, asp = 1)
title(main = &quot;volcano data: filled contour map&quot;)</code></pre>
<p><img src="module2_2_files/figure-html/unnamed-chunk-15-1.png" width="672" /></p>
<pre class="r"><code># CHALLENGE EXERCISES   -------------------------------------

#1: Create a custom function to calculate the predicted value y 
#    for the equation y = beta_0 + beta_1*x for any value of 
#    beta_0, beta_1 and x. Assume that beta_0 and 
#    beta_1 are both scalar, whereas x is a numeric vector. 
#    Use this function to calculate y for the values of 
#    $x$ = 1,...,10 with $\beta_0 = 2$, and $\beta_1= -1$. 
#    Use base R plotting (`plot()` function) to plot the results.
#
#2: Write a FOR loop that takes a numeric vector as input and 
#    computes the cumulative mean (for each element of the vector, 
#    compute the mean of all previous elements of the vector, 
#    including the current element). 
#
#3: Using the built-in &#39;volcano&#39; dataset (a matrix of elevation data 
#    with columns representing longitude and rows representing latitude),
#    calculate the standard deviation of elevation as an index of
#    &#39;ruggedness&#39; from the rows () of the volcano elevation data matrix.
#    Using the &quot;apply()&quot; function. Which row (latitude band) of the
#    &#39;volcano&#39; dataset has the most rugged terrain?</code></pre>
<p><a href="module2_3.html">–go to next module–</a></p>
</div>



</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open');
  });
});
</script>

<!-- code folding -->

<script>
$(document).ready(function ()  {

    // temporarily add toc-ignore selector to headers for the consistency with Pandoc
    $('.unlisted.unnumbered').addClass('toc-ignore')

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2,h3",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_');
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = true;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
