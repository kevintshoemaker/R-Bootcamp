<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />


<meta name="author" content="Getting started" />


<title>Submodule 1.1</title>

<script src="site_libs/header-attrs-2.14/header-attrs.js"></script>
<script src="site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/journal.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<style>h1 {font-size: 34px;}
       h1.title {font-size: 38px;}
       h2 {font-size: 30px;}
       h3 {font-size: 24px;}
       h4 {font-size: 18px;}
       h5 {font-size: 16px;}
       h6 {font-size: 12px;}
       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}
       pre:not([class]) { background-color: white }</style>
<script src="site_libs/jqueryui-1.11.4/jquery-ui.min.js"></script>
<link href="site_libs/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="site_libs/tocify-1.9.1/jquery.tocify.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<link href="site_libs/highlightjs-9.12.0/default.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>

<style type="text/css">code{white-space: pre;}</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>









<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
details > summary > p:only-child {
  display: inline;
}
pre code {
  padding: 0;
}
</style>


<style type="text/css">
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #adb5bd;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script type="text/javascript">
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.tab('show');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');

  // Navbar adjustments
  var navHeight = $(".navbar").first().height() + 15;
  var style = document.createElement('style');
  var pt = "padding-top: " + navHeight + "px; ";
  var mt = "margin-top: -" + navHeight + "px; ";
  var css = "";
  // offset scroll position for anchor links (for fixed navbar)
  for (var i = 1; i <= 6; i++) {
    css += ".section h" + i + "{ " + pt + mt + "}\n";
  }
  style.innerHTML = "body {" + pt + "padding-bottom: 40px; }\n" + css;
  document.head.appendChild(style);
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->



<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}

@media print {
.toc-content {
  /* see https://github.com/w3c/csswg-drafts/issues/4434 */
  float: right;
}
}

.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
}

.tocify .list-group-item {
  border-radius: 0px;
}


</style>



</head>

<body>


<div class="container-fluid main-container">


<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-bs-toggle="collapse" data-target="#navbar" data-bs-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">UNR R workshop, Fall 2022</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="index.html">Home</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Workshop #1: getting started
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="module1_1.html">Submodule 1.1: working with objects</a>
    </li>
    <li>
      <a href="module1_2.html">Submodule 1.2: managing data</a>
    </li>
    <li>
      <a href="module1_3.html">Submodule 1.3: plotting in ggplot2</a>
    </li>
    <li>
      <a href="module1_4.html">Submodule 1.4: data wrangling</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Workshop #2: beyond the basics
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="module2_1.html">Submodule 2.1: R packages</a>
    </li>
    <li>
      <a href="module2_2.html">Submodule 2.2: Programming in R</a>
    </li>
    <li>
      <a href="module2_3.html">Submodule 2.3: Stats in R</a>
    </li>
    <li>
      <a href="module2_4.html">Submodule 2.4: Spatial analysis in R</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Data sets
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="data.dat">Example: tab-separated data</a>
    </li>
    <li>
      <a href="data.csv">Example: comma-separated data</a>
    </li>
    <li>
      <a href="data.txt">Example: whitespace-separated data</a>
    </li>
    <li>
      <a href="data_missing.txt">Example: missing data</a>
    </li>
    <li>
      <a href="MTMetStations.csv">Meteorological Data</a>
    </li>
    <li>
      <a href="sculpineggs.csv">Sculpin Data</a>
    </li>
    <li>
      <a href="turtle_data.txt">Turtle Data</a>
    </li>
    <li>
      <a href="geneData.csv">Gene Data</a>
    </li>
    <li>
      <a href="reptiles.csv">Reptile Data</a>
    </li>
    <li>
      <a href="comm_data.txt">Comm Data</a>
    </li>
    <li>
      <a href="data.zip">GIS Data</a>
    </li>
  </ul>
</li>
<li>
  <a href="Links.html">Links</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div id="header">



<h1 class="title toc-ignore">Submodule 1.1</h1>
<h4 class="author">Getting started</h4>
<h4 class="date">Fall 2022</h4>

</div>


<p>Welcome to the 2022 UNR R workshop- let’s get started!</p>
<div id="get-materials-for-this-module" class="section level2">
<h2>Get materials for this module</h2>
<p>You will be introduced to a lot of new material very quickly in this
workshop, and you are not expected to remember everything! ‘Cheatsheets’
can quickly and easily refresh your memory about syntax that can be
difficult to remember. So don’t worry if you don’t memorize everything
we do together in this workshop- the key is that you leave this workshop
with comfort working in the RStudio environment, doing some basic data
operations in R, and most importantly, learning and trying new things on
your own!</p>
<p>Here are links to good R “cheatsheets”:</p>
<div id="base-r" class="section level3">
<h3>Base R</h3>
<p><a href="https://www.i3s.unice.fr/~malapert/R/pdf/base-r.pdf">Base R
Cheat sheet</a><br />
<a href="https://cran.r-project.org/doc/contrib/Short-refcard.pdf">R
reference card</a></p>
</div>
<div id="helpful-packages" class="section level3">
<h3>Helpful packages</h3>
<p><a
href="https://raw.githubusercontent.com/rstudio/cheatsheets/main/data-visualization.pdf">ggplot
cheat sheet</a><br />
<a
href="https://raw.githubusercontent.com/rstudio/cheatsheets/main/tidyr.pdf">data
‘tidying’</a><br />
<a
href="https://raw.githubusercontent.com/rstudio/cheatsheets/main/data-transformation.pdf">data
transformation</a><br />
<a
href="https://raw.githubusercontent.com/rstudio/cheatsheets/main/lubridate.pdf">working
with dates and times</a></p>
<p>Many additional cheat sheets are available <a
href="https://www.rstudio.com/resources/cheatsheets/">here</a></p>
</div>
</div>
<div id="load-script-for-submodule-1.1" class="section level2">
<h2>Load script for submodule #1.1</h2>
<ol style="list-style-type: decimal">
<li><p>Click <a href="module1_1.R">here</a> to download the script for
this submodule! I recommend right-clicking (or command-clicking for
Macs) on the link and selecting the “Save As” option from the context
menu. Save the script to a convenient folder on your laptop (e.g., a
folder called “Rworkshop2022”), which will serve as your <strong>working
directory</strong> for this workshop.</p></li>
<li><p>Start a new <strong>RStudio Project</strong>. To do this, open
RStudio and from the File menu select File&gt;&gt;New Project. In the
menu that follows, select “Existing Directory”, and then navigate to the
folder in which you saved the R script for this module (your working
directory). Select this folder to be your <strong>project
directory</strong>. Every time you open this project (File &gt;&gt; Open
Project), this project directory will be the first place that R looks
for data files and code, and will be the default location for saving
data and code.</p></li>
<li><p>Load a blank script in RStudio. To do this, click on the “blank
paper” icon at the far left of the RStudio toolbar (or File &gt;&gt; New
File &gt;&gt; R script). Your RStudio interface should now be divided
into four quadrants. In the RStudio default configuration, the top left
panel is your <strong>script</strong> (a set of written commands that R
can recognize and execute), the bottom left panel is your
<strong>console</strong> (your direct connection with R), the top right
panel is your <strong>environment</strong> (displays all the objects –
data sets, variables, functions– that you have defined in your current R
session), and the bottom right panel is a set of tabbed interfaces that
let you view help files, load packages, view plots, view files in your
working directory, etc.</p></li>
</ol>
<p>Take a couple minutes to familiarize yourself with the RStudio
environment.</p>
<p>Let’s get started!</p>
<p><img src="rstudio1.jpg" /></p>
</div>
<div id="explore-the-r-console" class="section level2">
<h2>Explore the R console</h2>
<p>The R console is located in the left half or bottom left of the
RStudio interface (see figure above).</p>
<p>The R console (what you see if you opened R directly instead of
RStudio) is a <strong>command line</strong> interface, and is <em>your
direct connection with R</em>: you give R a command at the prompt and R
executes that command.</p>
<ol style="list-style-type: decimal">
<li><p>Click on the console, just to the right of one of the “&gt;”
prompts.</p></li>
<li><p>You can use the console like a calculator. For example, type
<code>6+11</code> at the prompt and hit enter.</p></li>
<li><p>Now hit the “up” arrow. The R console remembers all previous
commands that it has executed in this <strong>session</strong>, which
allows you to re-run commands relatively easily.</p></li>
<li><p>Try typing <code># 2+2</code> and hitting “Enter”. Nothing
happens, right? We will come back to the special hashtag character
shortly.</p></li>
</ol>
<div id="lets-create-our-first-object" class="section level3">
<h3>Let’s create our first object</h3>
<p>Objects are defined using R’s <strong>assignment operator</strong>
(Windows shortcut: Alt + -)(Mac: replace Alt with Option), which looks
like a left arrow (<code>&lt;-</code>). Type the following statement
directly into the console:</p>
<pre class="r"><code>myname &lt;- &quot;Jim Bob&quot;  # or use your real name.</code></pre>
<p>Then hit “Enter”. What does R return?</p>
<p>NOTHING!</p>
<p>BUT…. check the <strong>Environment</strong> window (top right of
RStudio interface- list of all the objects you’ve defined in this
session). You should see that you now have a new <strong>object</strong>
in your environment, called “myname”, and this object contains a single
<strong>text string</strong>.</p>
<p>Now type <code>myname</code> into the R console and hit “Enter”. What
happens?</p>
<p>If you enter the name of an object at the command line, R
automatically prints the value of the object!</p>
<p>NOTE: RStudio has a useful auto-fill feature, which can save you lots
of time and headaches. After you’ve typed the first couple letters
(e.g., “my”), RStudio will suggest “myname” (or use the “tab” key to
trigger RStudio to give you autofill options) and you can just scroll to
the right object/function and hit “Enter”! The auto-type feature, unlike
R, is not case sensitive!</p>
</div>
</div>
<div id="graduating-to-r-scripts" class="section level2">
<h2>Graduating to R Scripts</h2>
<p>You will quickly realize that although the command-line R console is
nice to use for some things (e.g., quick things that don’t need to be
saved), there is a much better way to develop R code. That is by storing
a sequential set of commands as a text file. This text file (the
standard is to use the “.R” extension) is called an <strong>R
script</strong>.</p>
<div id="make-a-new-script" class="section level3">
<h3>Make a new script</h3>
<p>If you haven’t done it already, create a new R script by clicking on
the “blank paper” icon at the far left of the RStudio toolbar (or
File&gt;&gt;New File&gt;&gt;R script). The top left quadrant of the
RStudio interface (at least by default) should now contain a blank R
script.</p>
<p>In your blank script, let’s define a new object. For example:</p>
<pre><code>
my_obj &lt;- 6+11
</code></pre>
<p>Now place the cursor somewhere within the line of text you just wrote
and hit ‘Ctrl+Enter’ (or ‘Command+Enter’) to run that line of code! You
should see a new object (‘my_obj’) pop up in your environment.<a
href="#fn1" class="footnote-ref" id="fnref1"><sup>1</sup></a>.</p>
<p>Take a few minutes to get comfortable running commands and defining
new objects using your new R script.</p>
<p>Of course, it’s always a good idea to save your scripts often – so
feel free to save your new script before you move on.</p>
</div>
<div id="load-an-existing-script" class="section level3">
<h3>Load an Existing script</h3>
<p>Remember the file you downloaded at the beginning of this submodule?
That file is an R script (<a href="module1_1.R">“module1_1.R”</a>);
Let’s load it up now!</p>
<p>To do this, click on the “folder” icon on the Rstudio toolbar (or
File &gt;&gt; Open File) and choose the script you downloaded
earlier.</p>
<p>The first couple lines of the script for this module are preceded by
hashtags. As you have already seen, R ignores these lines (anything
preceded by a hashtag is ignored)- they are called
<strong>comments</strong>, and they help to keep code organized and
understandable.</p>
<p><em>use comments early and often- they are tremendously
valuable</em>.</p>
<p>Now you know the basics of how to use R scripts! Now, let’s keep
working through the remainder of the script you just opened.</p>
</div>
</div>
<div id="a-demo-of-r-in-action" class="section level2">
<h2>A demo of R in action</h2>
<p>Before we get into the basics, let’s just run through some of what R
can do! Don’t worry if you don’t understand something- we will go over
all of this in greater detail later!</p>
<p>To get started, let’s first load some R packages that help with data
wrangling and exploration</p>
<p>Packages in the CRAN repository can be installed using the function
“install.packages()”:</p>
<pre class="r"><code># R DEMO ----------------------  
#     don&#39;t worry if you don&#39;t understand this just yet- this is just a 
#     taste of where we are going!


# Install packages 
#   NOTE you only have to do this once. If you have not already installed the packages, you can uncomment and run the following lines:

# install.packages(c(&quot;ggplot2&quot;,&quot;tidyverse&quot;))</code></pre>
<p>Alternatively, you can use the “packages” tab in Rstudio (lower
right) and use the “install” button.</p>
<p>Once packages are installed, you can load them into your workspace
(so they are useable in your R session) using the “library()”
function:</p>
<pre class="r"><code># Load packages 

library(ggplot2)
library(tidyverse)
library(Lahman)    # for getting baseball data</code></pre>
<p>Next we can load in some data. To give you a sense of what R can do,
let’s load in some relatively complex datasets. These datasets happen to
be about baseball, but they can stand in for any complex datasets you
might encounter in your work!</p>
<pre class="r"><code># Read in data (from the web) 

salaries &lt;- read_csv(&quot;http://dgrtwo.github.io/pages/lahman/Salaries.csv&quot;)

master &lt;- read_csv(&quot;http://dgrtwo.github.io/pages/lahman/Master.csv&quot;)

batting &lt;- read_csv(&quot;http://dgrtwo.github.io/pages/lahman/Batting.csv&quot;)

# Read in data from package (you can read in all of these from the Lahman package!)

fielding &lt;- tibble(Lahman::Fielding)</code></pre>
<p>Let’s examine these data objects in r. Again, we will get into this
in more detail later!</p>
<pre class="r"><code># explore the data 

salaries</code></pre>
<pre><code>## # A tibble: 23,956 × 5
##    yearID teamID lgID  playerID   salary
##     &lt;dbl&gt; &lt;chr&gt;  &lt;chr&gt; &lt;chr&gt;       &lt;dbl&gt;
##  1   1985 BAL    AL    murraed02 1472819
##  2   1985 BAL    AL    lynnfr01  1090000
##  3   1985 BAL    AL    ripkeca01  800000
##  4   1985 BAL    AL    lacyle01   725000
##  5   1985 BAL    AL    flanami01  641667
##  6   1985 BAL    AL    boddimi01  625000
##  7   1985 BAL    AL    stewasa01  581250
##  8   1985 BAL    AL    martide01  560000
##  9   1985 BAL    AL    roeniga01  558333
## 10   1985 BAL    AL    mcgresc01  547143
## # … with 23,946 more rows</code></pre>
<pre class="r"><code># summary(salaries)    # summary statistics for all variables in data frame

master</code></pre>
<pre><code>## # A tibble: 18,354 × 24
##    playerID  birthYear birthMo…¹ birth…² birth…³ birth…⁴ birth…⁵ death…⁶ death…⁷
##    &lt;chr&gt;         &lt;dbl&gt;     &lt;dbl&gt;   &lt;dbl&gt; &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt;     &lt;dbl&gt;   &lt;dbl&gt;
##  1 aardsda01      1981        12      27 USA     CO      Denver       NA      NA
##  2 aaronha01      1934         2       5 USA     AL      Mobile       NA      NA
##  3 aaronto01      1939         8       5 USA     AL      Mobile     1984       8
##  4 aasedo01       1954         9       8 USA     CA      Orange       NA      NA
##  5 abadan01       1972         8      25 USA     FL      Palm B…      NA      NA
##  6 abadfe01       1985        12      17 D.R.    La Rom… La Rom…      NA      NA
##  7 abadijo01      1854        11       4 USA     PA      Philad…    1905       5
##  8 abbated01      1877         4      15 USA     PA      Latrobe    1957       1
##  9 abbeybe01      1869        11      11 USA     VT      Essex      1962       6
## 10 abbeych01      1866        10      14 USA     NE      Falls …    1926       4
## # … with 18,344 more rows, 15 more variables: deathDay &lt;dbl&gt;,
## #   deathCountry &lt;chr&gt;, deathState &lt;chr&gt;, deathCity &lt;chr&gt;, nameFirst &lt;chr&gt;,
## #   nameLast &lt;chr&gt;, nameGiven &lt;chr&gt;, weight &lt;dbl&gt;, height &lt;dbl&gt;, bats &lt;chr&gt;,
## #   throws &lt;chr&gt;, debut &lt;date&gt;, finalGame &lt;date&gt;, retroID &lt;chr&gt;, bbrefID &lt;chr&gt;,
## #   and abbreviated variable names ¹​birthMonth, ²​birthDay, ³​birthCountry,
## #   ⁴​birthState, ⁵​birthCity, ⁶​deathYear, ⁷​deathMonth</code></pre>
<pre class="r"><code># summary(master)

batting</code></pre>
<pre><code>## # A tibble: 97,889 × 24
##    playe…¹ yearID stint teamID lgID      G G_bat…²    AB     R     H  `2B`  `3B`
##    &lt;chr&gt;    &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt;  &lt;chr&gt; &lt;dbl&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
##  1 aardsd…   2004     1 SFN    NL       11      11     0     0     0     0     0
##  2 aardsd…   2006     1 CHN    NL       45      43     2     0     0     0     0
##  3 aardsd…   2007     1 CHA    AL       25       2     0     0     0     0     0
##  4 aardsd…   2008     1 BOS    AL       47       5     1     0     0     0     0
##  5 aardsd…   2009     1 SEA    AL       73       3     0     0     0     0     0
##  6 aardsd…   2010     1 SEA    AL       53       4     0     0     0     0     0
##  7 aardsd…   2012     1 NYA    AL        1      NA    NA    NA    NA    NA    NA
##  8 aaronh…   1954     1 ML1    NL      122     122   468    58   131    27     6
##  9 aaronh…   1955     1 ML1    NL      153     153   602   105   189    37     9
## 10 aaronh…   1956     1 ML1    NL      153     153   609   106   200    34    14
## # … with 97,879 more rows, 12 more variables: HR &lt;dbl&gt;, RBI &lt;dbl&gt;, SB &lt;dbl&gt;,
## #   CS &lt;dbl&gt;, BB &lt;dbl&gt;, SO &lt;dbl&gt;, IBB &lt;dbl&gt;, HBP &lt;dbl&gt;, SH &lt;dbl&gt;, SF &lt;dbl&gt;,
## #   GIDP &lt;dbl&gt;, G_old &lt;dbl&gt;, and abbreviated variable names ¹​playerID,
## #   ²​G_batting</code></pre>
<pre class="r"><code># summary(batting)

fielding</code></pre>
<pre><code>## # A tibble: 147,080 × 18
##    playe…¹ yearID stint teamID lgID  POS       G    GS InnOuts    PO     A     E
##    &lt;chr&gt;    &lt;int&gt; &lt;int&gt; &lt;fct&gt;  &lt;fct&gt; &lt;chr&gt; &lt;int&gt; &lt;int&gt;   &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt;
##  1 abercd…   1871     1 TRO    NA    SS        1     1      24     1     3     2
##  2 addybo…   1871     1 RC1    NA    2B       22    22     606    67    72    42
##  3 addybo…   1871     1 RC1    NA    SS        3     3      96     8    14     7
##  4 allisa…   1871     1 CL1    NA    2B        2     0      18     1     4     0
##  5 allisa…   1871     1 CL1    NA    OF       29    29     729    51     3     7
##  6 allisd…   1871     1 WS3    NA    C        27    27     681    68    15    20
##  7 ansonc…   1871     1 RC1    NA    1B        1     0      15     7     0     0
##  8 ansonc…   1871     1 RC1    NA    2B        2     1      30     3     4     1
##  9 ansonc…   1871     1 RC1    NA    3B       20    19     555    38    52    28
## 10 ansonc…   1871     1 RC1    NA    C         5     4      93    10     0     8
## # … with 147,070 more rows, 6 more variables: DP &lt;int&gt;, PB &lt;int&gt;, WP &lt;int&gt;,
## #   SB &lt;int&gt;, CS &lt;int&gt;, ZR &lt;int&gt;, and abbreviated variable name ¹​playerID</code></pre>
<pre class="r"><code># summary(fielding)</code></pre>
<p>Before we can do much with these data, we need to “wrangle” these
data into a format that can be visualized and analyzed effectively.</p>
<p>Let’s begin by merging these datasets into a single master
dataset…</p>
<pre class="r"><code># Do some wrangling! 

 # merge the batting and salaries data frames
merged.batting = left_join(batting, salaries, by=c(&quot;playerID&quot;, &quot;yearID&quot;, &quot;teamID&quot;, &quot;lgID&quot;))

 # merge the &quot;master&quot; dataset (player biographical info)
merged.bio = inner_join(merged.batting, master, by=&quot;playerID&quot;)

 # summarize fielding data by year and player- prepare to merge with other data
fielding.temp = fielding %&gt;% 
  group_by(playerID,yearID,teamID,lgID) %&gt;%     # 
  summarize(position = first(modeest::mfv(POS)),
            games = sum(G))</code></pre>
<pre><code>## Registered S3 method overwritten by &#39;rmutil&#39;:
##   method         from
##   print.response httr</code></pre>
<pre><code>## `summarise()` has grouped output by &#39;playerID&#39;, &#39;yearID&#39;, &#39;teamID&#39;. You can
## override using the `.groups` argument.</code></pre>
<pre class="r"><code>merged.all = inner_join(merged.bio,fielding.temp,by=c(&quot;playerID&quot;, &quot;yearID&quot;, &quot;teamID&quot;, &quot;lgID&quot;))
merged.all = merged.all %&gt;%    # remove all rows with no at-bats... 
  filter( AB &gt; 0 )

# range(merged.all$AB)

merged.all = merged.all %&gt;%     # make a new column with the full name
  mutate(name=paste(nameFirst, nameLast))</code></pre>
<p>Now let’s summarize the data by player and start to get a sense for
what patterns we can detect.</p>
<pre class="r"><code># summarize by player 

summarized.batters = merged.all %&gt;% 
  group_by(playerID) %&gt;% 
  summarise(name=first(name),
            League=first(modeest::mfv(lgID)),
            Position=first(modeest::mfv(position)),
            First.yr=min(yearID),
            Total.HR=sum(HR),
            Total.R=sum(R),
            Total.H=sum(H),
            AB=sum(AB),
            BattingAverage=sum(H) / sum(AB) ) %&gt;% 
  arrange(desc(Total.HR))


# visualize the data 

  # visualize correlation between hits and runs
ggplot(summarized.batters, aes(Total.H, Total.R)) + geom_point()</code></pre>
<p><img src="module1_1_files/figure-html/unnamed-chunk-8-1.png" width="672" /></p>
<pre class="r"><code>  # visualize histogram of batting average
ggplot(summarized.batters, aes(BattingAverage)) + geom_histogram()</code></pre>
<p><img src="module1_1_files/figure-html/unnamed-chunk-8-2.png" width="672" /></p>
<pre class="r"><code>  # remove &quot;outliers&quot; and try again
summarized.batters = summarized.batters %&gt;% 
  filter(AB&gt;100&amp;First.yr&gt;1920)

ggplot(summarized.batters, aes(BattingAverage)) + geom_histogram()</code></pre>
<p><img src="module1_1_files/figure-html/unnamed-chunk-8-3.png" width="672" /></p>
<pre class="r"><code>ggplot(summarized.batters, aes(BattingAverage,col=League)) + geom_density()</code></pre>
<p><img src="module1_1_files/figure-html/unnamed-chunk-8-4.png" width="672" /></p>
<pre class="r"><code># Why does NL density plot indicate a sizeable number of players with very low batting average?

# make a new variable to indicate whether each player is a pitcher or postition player

summarized.batters = summarized.batters %&gt;% 
  mutate(Pitcher=ifelse(Position==&quot;P&quot;,&quot;Pitcher&quot;,&quot;Position Player&quot;))

ggplot(summarized.batters, aes(BattingAverage)) + 
    geom_histogram(aes(y = ..density..,group=Pitcher)) + 
  geom_density(aes(col=Pitcher),lwd=1.5) +
    stat_function(
        fun = dnorm, 
        args = with(summarized.batters, c(mean = mean(BattingAverage[Position!=&quot;P&quot;]), 
                                          sd = sd(BattingAverage[Position!=&quot;P&quot;]))),
        col=&quot;lightblue&quot;,lwd=1.1
        )   + 
   stat_function(
        fun = dnorm, 
        args = with(summarized.batters, c(mean = mean(BattingAverage[Position==&quot;P&quot;]), 
                                          sd = sd(BattingAverage[Position==&quot;P&quot;]))),
        col=&quot;pink&quot;,lwd=1.1
        )   +
     scale_x_continuous(&quot;Batting Average&quot;) + 
     labs(title = &quot;Histogram with Normal Curve&quot;)  </code></pre>
<p><img src="module1_1_files/figure-html/unnamed-chunk-8-5.png" width="672" /></p>
<p>This time, let’s look for some time trends by summarizing by
year.</p>
<pre class="r"><code># Summmarize by time (and league) 

summarized.year = merged.all %&gt;% 
  filter(yearID&gt;1920) %&gt;%
  group_by(yearID,lgID) %&gt;% 
  summarise(Total.HR=sum(HR),
            Total.R=sum(R),
            Total.H=sum(H),
            AB=sum(AB),
            BattingAverage=sum(H) / sum(AB) ) %&gt;% 
  arrange(yearID, lgID)


summarized.year</code></pre>
<pre><code>## # A tibble: 186 × 7
## # Groups:   yearID [93]
##    yearID lgID  Total.HR Total.R Total.H    AB BattingAverage
##     &lt;dbl&gt; &lt;chr&gt;    &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt; &lt;dbl&gt;          &lt;dbl&gt;
##  1   1921 AL         477    6290   12509 42762          0.293
##  2   1921 NL         460    5631   12266 42367          0.290
##  3   1922 AL         525    5863   12034 42292          0.285
##  4   1922 NL         530    6190   12576 43041          0.292
##  5   1923 AL         442    5884   11870 42002          0.283
##  6   1923 NL         538    5984   12346 43203          0.286
##  7   1924 AL         397    6132   12261 42215          0.290
##  8   1924 NL         498    5577   12004 42430          0.283
##  9   1925 AL         533    6397   12419 42567          0.292
## 10   1925 NL         636    6193   12492 42845          0.292
## # … with 176 more rows</code></pre>
<pre class="r"><code># visualize the data 

  # visualize trend in home runs
ggplot(summarized.year, aes(yearID, Total.HR, col=lgID)) + 
  geom_line()</code></pre>
<p><img src="module1_1_files/figure-html/unnamed-chunk-9-1.png" width="672" /></p>
<pre class="r"><code>  # visualize trend in batting average
ggplot(summarized.year, aes(yearID, BattingAverage, col=lgID)) + 
  geom_line()</code></pre>
<p><img src="module1_1_files/figure-html/unnamed-chunk-9-2.png" width="672" /></p>
<p>Finally let’s do some more complex visualizations and run some
statistics…</p>
<pre class="r"><code># Summarize by time and team

summarized.teams.year = merged.all %&gt;%
  filter(yearID&gt;1920) %&gt;%
  group_by(yearID,teamID) %&gt;% 
  summarise(League = first(lgID),
            Total.HR=sum(HR),
            Total.R=sum(R),
            Total.H=sum(H),
            AB=sum(AB),
            BattingAverage=sum(H) / sum(AB) ) %&gt;% 
  arrange(desc(Total.HR))</code></pre>
<pre><code>## `summarise()` has grouped output by &#39;yearID&#39;. You can override using the
## `.groups` argument.</code></pre>
<pre class="r"><code>summarized.teams.year</code></pre>
<pre><code>## # A tibble: 2,026 × 8
## # Groups:   yearID [93]
##    yearID teamID League Total.HR Total.R Total.H    AB BattingAverage
##     &lt;dbl&gt; &lt;chr&gt;  &lt;chr&gt;     &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt; &lt;dbl&gt;          &lt;dbl&gt;
##  1   1997 SEA    AL          264     924    1574  5614          0.280
##  2   2005 TEX    AL          260     865    1528  5716          0.267
##  3   2010 TOR    AL          257     755    1364  5495          0.248
##  4   2000 HOU    NL          249     938    1547  5566          0.278
##  5   1996 BAL    AL          247     913    1498  5459          0.274
##  6   2001 TEX    AL          246     890    1566  5685          0.275
##  7   1996 SEA    AL          245     993    1625  5663          0.287
##  8   2012 NYA    AL          245     804    1462  5524          0.265
##  9   1999 SEA    AL          244     859    1499  5572          0.269
## 10   2000 TOR    AL          244     861    1562  5677          0.275
## # … with 2,016 more rows</code></pre>
<pre class="r"><code># visualize the data 

  # visualize correlation between home runs and year
ggplot(summarized.teams.year, aes(yearID, Total.HR)) + 
  geom_point(show.legend = FALSE) +
  geom_smooth() +
  facet_wrap(&#39;League&#39;)</code></pre>
<pre><code>## `geom_smooth()` using method = &#39;gam&#39; and formula &#39;y ~ s(x, bs = &quot;cs&quot;)&#39;</code></pre>
<p><img src="module1_1_files/figure-html/unnamed-chunk-10-1.png" width="672" /></p>
<p>Let’s run a statistical analysis to see if the increasing home run
trend is “real”.</p>
<pre class="r"><code>ggplot(summarized.teams.year,aes(yearID,Total.HR))+
  geom_point() +
  geom_smooth(method=&quot;lm&quot;)</code></pre>
<pre><code>## `geom_smooth()` using formula &#39;y ~ x&#39;</code></pre>
<p><img src="module1_1_files/figure-html/unnamed-chunk-11-1.png" width="672" /></p>
<pre class="r"><code>model1 &lt;- lm(Total.HR~yearID,summarized.teams.year)  # linear regression analysis
summary(model1)</code></pre>
<pre><code>## 
## Call:
## lm(formula = Total.HR ~ yearID, data = summarized.teams.year)
## 
## Residuals:
##      Min       1Q   Median       3Q      Max 
## -102.388  -26.357   -3.177   22.578  127.902 
## 
## Coefficients:
##               Estimate Std. Error t value Pr(&gt;|t|)    
## (Intercept) -2.073e+03  6.058e+01  -34.23   &lt;2e-16 ***
## yearID       1.114e+00  3.069e-02   36.31   &lt;2e-16 ***
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1
## 
## Residual standard error: 36.61 on 2024 degrees of freedom
## Multiple R-squared:  0.3945, Adjusted R-squared:  0.3942 
## F-statistic:  1318 on 1 and 2024 DF,  p-value: &lt; 2.2e-16</code></pre>
<p>Then we can perform some diagnostic tests to make sure the data meet
the assumptions of the analysis:</p>
<pre class="r"><code># test key assumptions visually

layout(matrix(1:4,nrow=2,byrow=T))  # set up graphics window
plot(model1)  # run diagnostic plots for our regression</code></pre>
<p><img src="module1_1_files/figure-html/unnamed-chunk-12-1.png" width="672" /></p>
<p>With just minor changes to the above code, we could look at many
additional questions!</p>
</div>
<div id="back-to-basics-r-objects" class="section level2">
<h2>Back to basics: R Objects</h2>
<p>Okay, let’s step back and learn a little bit about R as a
data-oriented programming language.</p>
<p>R has many different kinds of objects that you can define and store
in memory.</p>
<p>Objects that enable storage of information (data objects) include:
<em>vectors</em>, <em>matrices</em>, <em>lists</em>, and <em>data
frames</em>.</p>
<p>Objects that transform data and perform operations (e.g.,
statistics/visualizations) on data objects are called
<em>functions</em>.</p>
<div id="functions" class="section level3">
<h3>Functions</h3>
<p>Functions are routines that take inputs (usually data objects) (also
called <strong>arguments</strong>) and produce something useful in
return (transformed data objects, summaries, plots, tables, statistics,
files).</p>
<p>In R, the name of the function is followed by parentheses, and any
arguments (inputs) are entered inside the parentheses. The basic syntax
looks like the code snippet below.</p>
<p><img src="funcmach.png" style="width:25.0%" /></p>
<pre><code>## function syntax
functionName([argument 1, argument2, ...])</code></pre>
<p>If you don’t type the parenthesis, the function is not run- instead,
the function definition is shown instead.</p>
<p>Here are some examples of how functions are used. Note the
parentheses!</p>
<pre class="r"><code># BACK TO BASICS -------------------

# functions ------------------- 

sum(1, 2, 3, 10)    # returns: 15

c(1, 2, 3, 10)   # combine four numbers into a single data object (a vector!)

floor(67.8)  # removes the decimal component of a number
round(67.8)  # rounds a number

near(0.01,0,tol=0.2)  # returns TRUE if argument 1 is near to argument 2 within a certain tolerance level

near    # oops, forgot the parentheses!</code></pre>
<p>It’s easy to get some help if you forget how a function works:</p>
<pre class="r"><code>help(round)  # a function for getting help with functions!!</code></pre>
<pre><code>## starting httpd help server ... done</code></pre>
<pre class="r"><code>?round         # shortcut for the &#39;help&#39; function</code></pre>
<p>We will revisit functions in more detail (and build our own
functions) in the “Programming” submodule.</p>
</div>
<div id="data-objects-and-variables" class="section level3">
<h3>Data objects and variables</h3>
<div id="data-types" class="section level4">
<h4>Data types</h4>
<p>The basic data types in R are:</p>
<ul>
<li>“numeric” (numbers)<br />
</li>
<li>“character” (text strings)</li>
<li>“logical” (TRUE/FALSE)<br />
</li>
<li>“factor” (categorical)</li>
</ul>
<p>Data of each of these types can be represented as scalars, vectors,
matrices, lists, and data frames</p>
</div>
<div id="scalars" class="section level4">
<h4>Scalars</h4>
<p>Scalars are the simplest data objects. A scalar is just a single
value of any data type.</p>
<pre class="r"><code>#  Create R Objects ------------------------


# scalars 


scalar1 &lt;- &#39;this is a scalar&#39;
scalar2 &lt;- 104</code></pre>
<p>Scalars can store information of any type <a href="#fn2"
class="footnote-ref" id="fnref2"><sup>2</sup></a>. In the example above,
<code>scalar1</code> is a character, <code>scalar2</code> is
numeric.</p>
</div>
<div id="vectors" class="section level4">
<h4>Vectors</h4>
<p>Vectors can combine multiple scalars in a single data object. In
fact, a scalar in R is really just a vector of length 1.</p>
<p>First let’s create some vectors. In the code below we use a function
called <code>c()</code>. You can think of it as the ‘combine’ function-
it takes several smaller data objects and combines them together into a
single object.</p>
<pre class="r"><code># VECTORS  

vector1 &lt;- c(1.1, 2.1, 3.1, 4)   # the &quot;c()&quot; function combines smaller data objects into a larger object
vector2 &lt;- c(&#39;a&#39;, &#39;b&#39;, &#39;c&#39;)</code></pre>
<p>There are many different ways to create a vector. You’ll learn more
about that later. Check out the vectors you just created. Each vector is
composed of one or more scalar <strong>elements</strong> of the same
type.</p>
<p>Now let’s do some stuff with vectors!</p>
<pre class="r"><code>d1 &lt;- 1:3             # make a vector: 1,2,3
d2 &lt;- d1+3            # add 3 to all elements of the vector &quot;myvec&quot;
d3 &lt;- d1+d2           # elementwise addition

length(d1)            # number of elements in a vector
sum(d3)               # sum of all elements in a vector

d2[2]                 # extract the second element in the vector</code></pre>
<p>NOTE: strictly speaking, there are no true scalars in R- scalars are
just vectors with 1 element!</p>
</div>
<div id="matrices" class="section level4">
<h4>Matrices</h4>
<p><strong>Matrix</strong> data objects have two
<strong>dimensions</strong>: rows and columns. All of the elements in a
matrix must be of the same <strong>type</strong>.</p>
<p>Let’s make our first matrix. One simple way to make a matrix is just
by joining two or more vectors using the function <code>cbind()</code>
(bind vectors or matrices together by column) or <code>rbind()</code>
(bind vectors or matrices together by row)</p>
<pre class="r"><code># MATRICES 

mymat &lt;- cbind(d1,d2)        # create a matrix by binding vectors, with vector d1 as column 1 and d2 as column 2
mymat</code></pre>
<pre><code>##      d1 d2
## [1,]  1  4
## [2,]  2  5
## [3,]  3  6</code></pre>
<pre class="r"><code>class(mymat)   # confirm that the new object &quot;mymat&quot; is a matrix using the &#39;class()&#39; function</code></pre>
<pre><code>## [1] &quot;matrix&quot; &quot;array&quot;</code></pre>
<pre class="r"><code>mymat &lt;- matrix(c(1,2,3,4,5,6),nrow=3,ncol=2)        # create matrix another way (matrix constructor)
mymat</code></pre>
<pre><code>##      [,1] [,2]
## [1,]    1    4
## [2,]    2    5
## [3,]    3    6</code></pre>
<p>We can do stuff with matrices:</p>
<pre class="r"><code># math with matrices

mymat + 2</code></pre>
<pre><code>##      [,1] [,2]
## [1,]    3    6
## [2,]    4    7
## [3,]    5    8</code></pre>
<pre class="r"><code>sum(mymat)</code></pre>
<pre><code>## [1] 21</code></pre>
<pre class="r"><code># extract matrix elements

mymat[3,2]    # extract the element in the 3rd row, 2nd column</code></pre>
<pre><code>## [1] 6</code></pre>
<pre class="r"><code>mymat[,1]     # extract the entire first column</code></pre>
<pre><code>## [1] 1 2 3</code></pre>
<pre class="r"><code># X[a,b]       access row a, column b element of matrix/data frame X
# X[,b]        access all rows of column b of matrix/data frame X
# X[a,]        access row a of matrix/data frame X</code></pre>
</div>
<div id="lists" class="section level4">
<h4>Lists</h4>
<p><strong>Lists</strong> are more general than matrices.
<strong>List</strong> objects are just a bunch of arbitrary R data
objects (called <strong>list elements</strong>) grouped together into a
single object! The elements of a list don’t need to be the same length
or the same <strong>type</strong>. The elements of a list can be
vectors, matrices, other lists, or even functions.</p>
<p>Let’s make our first list:</p>
<pre class="r"><code># LISTS 

mylist &lt;- list()        # create empty list
mylist[[1]] &lt;- c(1,2,3)     # note the double brackets- this is one way to reference list elements. 
mylist[[2]] &lt;- c(&quot;foo&quot;,&quot;bar&quot;)
mylist[[3]] &lt;- matrix(1:6,nrow=2)
mylist</code></pre>
<pre><code>## [[1]]
## [1] 1 2 3
## 
## [[2]]
## [1] &quot;foo&quot; &quot;bar&quot;
## 
## [[3]]
##      [,1] [,2] [,3]
## [1,]    1    3    5
## [2,]    2    4    6</code></pre>
<pre class="r"><code># do stuff with lists

mylist[[2]]    # extract the second list element</code></pre>
<pre><code>## [1] &quot;foo&quot; &quot;bar&quot;</code></pre>
<pre class="r"><code>mylist[[3]][1,2]   # extract the first row, second column from the matrix that is embedded as the third element in this list !   </code></pre>
<pre><code>## [1] 3</code></pre>
<div id="data-frames-and-tibbles" class="section level5">
<h5>Data frames and tibbles</h5>
<p><strong>Data frame</strong> objects are the basic data storage object
in R. Data frames are a special type of <strong>list</strong> in which
each list element is a <em>vector</em> of equal length. Each list
element in a data frame is also known as a <em>column</em>.</p>
<p>Data frames superficially resemble matrices, since both have rows and
columns. However, unlike matrices, the columns of a data frame can
represent different data <strong>types</strong> (i.e., character,
logical, numeric, factor), and can thereby represent different types of
information!</p>
<p><em>Data frames are the fundamental data storage structure in R</em>.
You can think of a data frame like a spreadsheet. Each row of the the
data frame represents a different observation, and each column
represents a different measurement taken on each observation unit.</p>
<p>Let’s make our first data frame.</p>
<pre class="r"><code># DATA FRAMES 

df1 &lt;- data.frame(col1=c(1,2,3),col2=c(&quot;A&quot;,&quot;A&quot;,&quot;B&quot;))        # create a data frame with two columns. Each column is a vector of length 3
df1</code></pre>
<pre><code>##   col1 col2
## 1    1    A
## 2    2    A
## 3    3    B</code></pre>
<pre class="r"><code>df1[1,2]     # extract the first element in the second column</code></pre>
<pre><code>## [1] &quot;A&quot;</code></pre>
<pre class="r"><code>df1$col2     # extract the second column by name (alternatively, df1[[&quot;col2&quot;]])</code></pre>
<pre><code>## [1] &quot;A&quot; &quot;A&quot; &quot;B&quot;</code></pre>
<p>Now we have a data frame with three observation units and two
measurements (variables).</p>
<p>A <strong>tibble</strong> is the same thing as a data frame, just
with a few tweaks to make it work better in the tidyverse. We will
primarily work with tibble data frames in this workshop. For our
purposes right now, tibbles and data frames are the same thing.</p>
</div>
</div>
</div>
</div>
<div id="making-up-data" class="section level2">
<h2>Making up data!</h2>
<p>In this section, we will make up some fake data objects. In the next
submodule we’ll practice working with real data!</p>
<div id="generating-sequences-of-numbers" class="section level3">
<h3>Generating sequences of numbers</h3>
<p>One task that comes up a lot is generating sequences of numbers:</p>
<pre class="r"><code># MAKING UP DATA!  ----------------------------------

# Generating vector sequences  

1:10                        # sequential vector from 1 to 10</code></pre>
<pre><code>##  [1]  1  2  3  4  5  6  7  8  9 10</code></pre>
<pre class="r"><code>seq(0,1,length=5)          # sequence of length 5 between 0 and 1 </code></pre>
<pre><code>## [1] 0.00 0.25 0.50 0.75 1.00</code></pre>
<p>Another task is to group regular recurring sequences together:</p>
<pre class="r"><code># Repeating vector sequences 

rep(0,times=3)                # repeat 0 three times</code></pre>
<pre><code>## [1] 0 0 0</code></pre>
<pre class="r"><code>rep(1:3,times=2)              # repeat the vector 1:3 twice</code></pre>
<pre><code>## [1] 1 2 3 1 2 3</code></pre>
<pre class="r"><code>rep(1:3,each=2)               # repeat each element of 1:3 two times</code></pre>
<pre><code>## [1] 1 1 2 2 3 3</code></pre>
<p>And finally, we can fill up a vector with random numbers using one of
R’s built in <strong>random number generators</strong>:</p>
<pre class="r"><code># Random numbers 

rnorm(10)                     # 10 samples from std. normal</code></pre>
<pre><code>##  [1]  1.6603479  0.8944701  0.1321728 -1.2993650  0.5006127  0.5980192
##  [7]  0.1134621  1.8719101 -0.3307061 -0.9835096</code></pre>
<pre class="r"><code>rnorm(10,mean=-2,sd=4)        # 10 samples from Normal(-2,4^2)</code></pre>
<pre><code>##  [1] -2.889591 -2.321176  2.220551  2.141924 -1.612882 -5.504331  1.907792
##  [8] -5.419351 -1.622560 -3.429506</code></pre>
<pre class="r"><code>rbinom(5,size=3,prob=.5)      # 5 samples from Binom(3,0.5)</code></pre>
<pre><code>## [1] 1 1 1 3 1</code></pre>
<pre class="r"><code>rbinom(5,3,.1)                # 5 samples from Binom(3,0.1)</code></pre>
<pre><code>## [1] 0 1 0 1 0</code></pre>
<pre class="r"><code>runif(10)                     # 10 standard uniform random numbers</code></pre>
<pre><code>##  [1] 0.5655247 0.6238065 0.2244214 0.8783187 0.3847452 0.2927396 0.9114053
##  [8] 0.4550282 0.6021124 0.2194957</code></pre>
<pre class="r"><code>runif(10,min=-1,max=1)        # 10 uniform random numbers from [-1,1]</code></pre>
<pre><code>##  [1] -0.76709783 -0.85628316  0.88077532  0.96181180 -0.32780927  0.07864404
##  [7]  0.23972995 -0.08209653 -0.12029378  0.26073800</code></pre>
<p>And finally, we can make up a fake data frame (or tibble) using some
of the tricks we just learned!</p>
<pre class="r"><code># Make up an entire fake data frame!

my.data &lt;- tibble(
  Obs.Id = 1:100,
  Treatment = rep(c(&quot;A&quot;,&quot;B&quot;,&quot;C&quot;,&quot;D&quot;,&quot;E&quot;),each=20),
  Block = rep(1:20,times=5),
  Germination = rpois(100,lambda=rep(c(1,5,4,7,1),each=20)),   # random poisson variable
  AvgHeight = rnorm(100,mean=rep(c(10,30,31,25,35,7),each=20))
)
my.data</code></pre>
<pre><code>## # A tibble: 100 × 5
##    Obs.Id Treatment Block Germination AvgHeight
##     &lt;int&gt; &lt;chr&gt;     &lt;int&gt;       &lt;int&gt;     &lt;dbl&gt;
##  1      1 A             1           0      9.07
##  2      2 A             2           0     12.4 
##  3      3 A             3           0     10.2 
##  4      4 A             4           0     11.8 
##  5      5 A             5           0      8.25
##  6      6 A             6           0      8.05
##  7      7 A             7           1     10.9 
##  8      8 A             8           0      8.44
##  9      9 A             9           0     10.2 
## 10     10 A            10           2      9.89
## # … with 90 more rows
## # ℹ Use `print(n = ...)` to see more rows</code></pre>
<pre class="r"><code>summary(my.data)    # Use the &quot;summary()&quot; function to summarize each column in the data frame.</code></pre>
<pre><code>##      Obs.Id        Treatment             Block        Germination   
##  Min.   :  1.00   Length:100         Min.   : 1.00   Min.   : 0.00  
##  1st Qu.: 25.75   Class :character   1st Qu.: 5.75   1st Qu.: 1.00  
##  Median : 50.50   Mode  :character   Median :10.50   Median : 3.00  
##  Mean   : 50.50                      Mean   :10.50   Mean   : 3.46  
##  3rd Qu.: 75.25                      3rd Qu.:15.25   3rd Qu.: 6.00  
##  Max.   :100.00                      Max.   :20.00   Max.   :10.00  
##    AvgHeight    
##  Min.   : 8.05  
##  1st Qu.:24.63  
##  Median :29.70  
##  Mean   :26.39  
##  3rd Qu.:32.10  
##  Max.   :37.16</code></pre>
<pre class="r"><code>mydf=my.data[21:30,]  # extract rows 21 to 30 and store as a new data frame
mydf</code></pre>
<pre><code>## # A tibble: 10 × 5
##    Obs.Id Treatment Block Germination AvgHeight
##     &lt;int&gt; &lt;chr&gt;     &lt;int&gt;       &lt;int&gt;     &lt;dbl&gt;
##  1     21 B             1           7      30.1
##  2     22 B             2           8      29.3
##  3     23 B             3           7      28.6
##  4     24 B             4           9      30.4
##  5     25 B             5           4      32.4
##  6     26 B             6           2      28.3
##  7     27 B             7           4      29.4
##  8     28 B             8           2      30.3
##  9     29 B             9           3      29.1
## 10     30 B            10           5      30.4</code></pre>
<pre class="r"><code>mydf$Treatment    # access a column of the data frame by name</code></pre>
<pre><code>##  [1] &quot;B&quot; &quot;B&quot; &quot;B&quot; &quot;B&quot; &quot;B&quot; &quot;B&quot; &quot;B&quot; &quot;B&quot; &quot;B&quot; &quot;B&quot;</code></pre>
<p>Here are some useful R functions for exploring data objects:</p>
<pre class="r"><code># Useful data exploration/checking tools in R --------------------

length(d2)        # Obtain length (# elements) of vector d2
dim(mymat)        # Obtain dimensions of matrix or array
summary(my.data)  # summarize columns in a data frame. 
names(my.data)    # get names of variables in a data frame (or names of elements in a named vector)
nrow(my.data)     # get number of rows/observations in a data frame
ncol(my.data)     # get number of columns/variables in a data frame
str(my.data)      # look at the &quot;internals&quot; of an object (useful for making sense of complex objects!)</code></pre>
</div>
</div>
<div id="challenge-exercises" class="section level2">
<h2>Challenge exercises</h2>
<ol style="list-style-type: decimal">
<li>Create a 3 row by 2 column matrix named ‘mymat’. Use the “rbind()”
function to bind the following three rows together using these three
vectors as rows:</li>
</ol>
<pre><code>c(1,4) 
c(2,5) 
c(3,6)</code></pre>
<p>Your final matrix should look like this:</p>
<pre><code>##      [,1] [,2]
## [1,]    1    4
## [2,]    2    5
## [3,]    3    6</code></pre>
<ol start="2" style="list-style-type: decimal">
<li>Create a new matrix called ‘mymat2’ that includes all the data from
columns 3 to 5 of data frame mydf. HINT: use the “as.matrix()” function
to coerce a data frame into a matrix.</li>
</ol>
<p>Your result should look like this:</p>
<pre><code>##       Block Germination AvgHeight
##  [1,]     1           7  30.11009
##  [2,]     2           8  29.32077
##  [3,]     3           7  28.62151
##  [4,]     4           9  30.43346
##  [5,]     5           4  32.35144
##  [6,]     6           2  28.30959
##  [7,]     7           4  29.41184
##  [8,]     8           2  30.26950
##  [9,]     9           3  29.10932
## [10,]    10           5  30.41413</code></pre>
<ol start="3" style="list-style-type: decimal">
<li>Create a list named ‘mylist’ that is composed of a vector: 1:3, a
matrix: matrix(1:6,nrow=3,ncol=2), and a data frame:
data.frame(x=c(1,2,3),y=c(TRUE,FALSE,TRUE),z=c(“a”,“a”,“b”)).</li>
</ol>
<p>Your result should look like this:</p>
<pre><code>## [[1]]
## [1] 1 2 3
## 
## [[2]]
##      [,1] [,2]
## [1,]    1    4
## [2,]    2    5
## [3,]    3    6
## 
## [[3]]
##   x     y z
## 1 1  TRUE a
## 2 2 FALSE a
## 3 3  TRUE b</code></pre>
<ol start="4" style="list-style-type: decimal">
<li>Extract the first and third observation from the 2nd column of the
data frame in ‘mylist’ (the list created in challenge 6 above).</li>
</ol>
<p>Your result should look like this:</p>
<ol start="5" style="list-style-type: decimal">
<li>(extra challenging!) Create a data frame (or tibble) named
‘df_spatial’ that contains 25 spatial locations, with ‘long’ and ‘lat’
as the column names (25 rows/observations, 2 columns/variables). These
locations should describe a 5 by 5 regular grid with extent long: [-1,1]
and lat: [-1,1].</li>
</ol>
<p>HINT: you don’t need to type each location in by hand! Use the
‘rep()’ and ‘seq()’ functions instead.</p>
<p>To make sure you got it right, use the visualization code provided
below:</p>
<p>It should look something like this:</p>
<p><img src="module1_1_files/figure-html/unnamed-chunk-30-1.png" width="672" /></p>
<pre class="r"><code># CHALLENGE EXERCISES -------------------------


### Challenge 1: Create a 3 row by 2 column matrix equivalent to mymat. Use the &quot;rbind()&quot; function to bind the three rows together using the following three vectors as rows:

c(1,4) 
c(2,5) 
c(3,6)

### Challenge 2: Create a new matrix called &#39;mymat2&#39; that includes all the data from columns 3 to 5 of data frame mydf. HINT: use the &quot;as.matrix()&quot; function to coerce a data frame into a matrix.

### Challenge 3: Create a list named &#39;mylist&#39; that is composed of a vector: 1:3, a matrix: matrix(1:6,nrow=3,ncol=2), and a data frame: data.frame(x=c(1,2,3),y=c(TRUE,FALSE,TRUE),z=c(&quot;a&quot;,&quot;a&quot;,&quot;b&quot;)).

### Challenge 4: Extract the first and third observation from the 2nd column of the data frame in &#39;mylist&#39; (the list created in challenge 6 above).

### Challenge 5: (extra challenging!) Create a data frame named &#39;df_spatial&#39; that contains 25 spatial locations, with &#39;long&#39; and &#39;lat&#39; as the column names (25 rows/observations, 2 columns/variables). These locations should describe a 5 by 5 regular grid with extent long: [-1,1] and lat: [-1,1]. 

###     HINT: you don&#39;t need to type each location in by hand! Use the &#39;rep()&#39; and &#39;seq()&#39; functions instead.

# Code for visualizing the results from challenge problem 5:

plot(x=df_spatial$long, y=df_spatial$lat, main=&quot;Regular grid&quot;,xlab=&quot;long&quot;,ylab=&quot;lat&quot;,xlim=c(-1.5,1.5),ylim=c(-1.5,1.5),pch=20,cex=2)
abline(v=c(-1,1),h=c(-1,1),col=&quot;green&quot;,lwd=1)</code></pre>
<p><a href="module1_2.html">–go to next submodule–</a></p>
</div>
<div class="footnotes footnotes-end-of-document">
<hr />
<ol>
<li id="fn1"><p>RStudio has several helpful keyboard shortcuts to make
running lines of code easier. <a
href="https://support.rstudio.com/hc/en-us/articles/200711853-Keyboard-Shortcuts">Check
this website</a> for a comprehensive set of keyboard shortcuts- or
access the shortcuts using help&gt;&gt;keyboard shortcuts.<a
href="#fnref1" class="footnote-back">↩︎</a></p></li>
<li id="fn2"><p>If you’re uncertain about the type of any R object the R
function use the <code>typeof()</code> function.<a href="#fnref2"
class="footnote-back">↩︎</a></p></li>
</ol>
</div>



</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open');
  });
});
</script>

<!-- code folding -->

<script>
$(document).ready(function ()  {

    // temporarily add toc-ignore selector to headers for the consistency with Pandoc
    $('.unlisted.unnumbered').addClass('toc-ignore')

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2,h3",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_');
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = true;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
